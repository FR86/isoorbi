---
output: md_document
params:
  generating_pkgdown_index: false
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%",
  dpi = 300,
  message = FALSE
)
```

# isoorbi <a href='https://isoorbi.isoverse.org/'> <img src="inst/www/logo.png" align="right" height="138" /> </a>

<!-- badges: start -->
  [![CRAN status](https://www.r-pkg.org/badges/version/isoorbi)](https://CRAN.R-project.org/package=isoorbi)
  [![Documentation](https://img.shields.io/badge/docs-online-green.svg)](https://isoorbi.isoverse.org/)
  [![R-CMD-check](https://github.com/isoverse/isoorbi/workflows/R-CMD-check/badge.svg)](https://github.com/isoverse/isoorbi/actions)
  [![Codecov test coverage](https://codecov.io/gh/isoverse/isoorbi/graph/badge.svg)](https://app.codecov.io/gh/isoverse/isoorbi)
<!-- badges: end -->

## Overview

The goal of the isoorbi R package is to help you process isotopocule measurements from an **Orbitrap Isotope Solutions** mass spectrometer. It expects <code>.isox</code> files created by IsoX as input.

## Installation

You can install the current CRAN version of `isoorbi` with:

```{r, eval = FALSE}
install.packages("isoorbi")
```

To use the latest updates, you can install the development version of `isoorbi` from [GitHub](https://github.com/) with:

```{r, eval = FALSE}
if(!requireNamespace("pak", quietly = TRUE)) install.packages("pak")
pak::pak("isoverse/isoorbi")
```

> Important: as of isoorbi version 1.5.0, it is possible to read .raw files directly using the [isoraw reader](inst/assembly) built into this package. The first time you read a .raw file, you will be asked to agree to [Thermo's license agreement](https://github.com/fgcz/rawrr/blob/devel/inst/rawrrassembly/RawFileReaderLicense.txt) to proceed. Implementation of the isoraw reader, would not have been possible without the example provided by Jim Shofstahl as part of Thermo's [RawFileReader](https://github.com/thermofisherlsms/RawFileReader) and the raw file reader developed by Witold Wolski, Christian Panse, Christian Trachsel, and Tobias Kockmann as part of the [rawrr package](https://github.com/fgcz/rawrr).


## Show me some code

```{r "example"}
library(isoorbi)

system.file(package = "isoorbi", "extdata", "testfile_flow.isox") |>
  orbi_read_isox() |>
  orbi_flag_satellite_peaks() |>
  orbi_define_basepeak(basepeak_def = "M0")|> 
  orbi_summarize_results(ratio_method = "sum") |>
  orbi_export_data_to_excel(file = "data_summary.xlsx")
```

```{r, include = FALSE}
unlink("data_summary.xlsx")
```


## Package structure

```{r}
#| echo: false
#| results: asis
if (params$generating_pkgdown_index) {
  # if we're in index.md
  cat("<p>Click on the individual functions to jump straight to their documenation.</p>\n")
  readLines("man/figures/figure_flowchart.svg") |> cat(sep = "\n")
} else {
  # if we're making README.md
  cat("[![](man/figures/figure_flowchart.svg)](https://isoorbi.isoverse.org)")
}
```

```{r}
#| label: generate pkgdown index.md
#| include: false
# trigger index.md generation
if (!params$generating_pkgdown_index) {
  out <- xfun::Rscript_call(
    rmarkdown::render,
    args = list(
      input = "README.Rmd", 
      output_file = "pkgdown/index.md",
      params = list(generating_pkgdown_index = TRUE)
    )
  )
}
```

## Getting help

If you encounter a bug, please file an issue with a minimal reproducible example on [GitHub](https://github.com/isoverse/isoorbi/issues). 

For questions and other discussion, please use the [isoorbi slack workspace](https://isoorbi.slack.com).
